<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация клиента</title>
    <link rel="stylesheet" href="../Styles/regClientPage.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📝 Регистрация клиента</h1>
            <p>Создайте аккаунт для доступа к системе управления заказами</p>
        </div>

        <div class="registration-card">
            <form id="registrationForm">
                <div class="form-section">
                    <div class="section-title">
                        <i>👤</i> Личная информация
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="lastName" class="required">Фамилия</label>
                            <input type="text"
                                   id="lastName"
                                   name="lastName"
                                   placeholder="Иванов"
                                   required
                                   autocomplete="family-name">
                            <div class="error-message" id="lastNameError">
                                Пожалуйста, введите фамилию
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="firstName" class="required">Имя</label>
                            <input type="text"
                                   id="firstName"
                                   name="firstName"
                                   placeholder="Иван"
                                   required
                                   autocomplete="given-name">
                            <div class="error-message" id="firstNameError">
                                Пожалуйста, введите имя
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="middleName">Отчество</label>
                            <input type="text"
                                   id="middleName"
                                   name="middleName"
                                   placeholder="Иванович"
                                   autocomplete="additional-name">
                        </div>

                        <div class="form-group">
                            <label for="birthDate" class="required">Дата рождения</label>
                            <input type="date"
                                   id="birthDate"
                                   name="birthDate"
                                   required
                                   max="2006-01-01"
                                   min="1900-01-01">
                            <div class="error-message" id="birthDateError">
                                Укажите корректную дату рождения
                            </div>
                            <div class="hint">Должны быть старше 18 лет</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">
                        <i>📱</i> Контактная информация
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="phone" class="required">Номер телефона</label>
                            <div class="phone-input">
                                <div class="country-code" id="countryCode">+7</div>
                                <input type="tel"
                                       class="phone-number"
                                       id="phone"
                                       name="phone"
                                       placeholder="912 345 67 89"
                                       required
                                       pattern="[0-9\s\-\(\)]+"
                                       autocomplete="tel">
                            </div>
                            <div class="error-message" id="phoneError">
                                Введите корректный номер телефона
                            </div>
                            <div class="hint">Телефон будет зашифрован для вашей безопасности</div>
                        </div>

                        <div class="form-group">
                            <label for="email" class="required">Email адрес</label>
                            <input type="email"
                                   id="email"
                                   name="email"
                                   placeholder="ivanov@example.com"
                                   required
                                   autocomplete="email">
                            <div class="error-message" id="emailError">
                                Введите корректный email адрес
                            </div>
                            <div class="hint">Email будет зашифрован для вашей безопасности</div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">
                        <i>📍</i> Адрес и местоположение
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="country" class="required">Страна</label>
                            <select id="country" name="country" required>
                                <option value="">Выберите страну...</option>
                                <option value="1">Россия</option>
                                <option value="2">США</option>
                                <option value="3">Китай</option>
                                <option value="4">Германия</option>
                                <option value="5">Франция</option>
                                <option value="6">Италия</option>
                                <option value="7">Испания</option>
                                <option value="8">Бразилия</option>
                                <option value="9">Индия</option>
                                <option value="10">Япония</option>
                            </select>
                            <div class="error-message" id="countryError">
                                Пожалуйста, выберите страну
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="address" class="required">Адрес</label>
                            <textarea id="address"
                                      name="address"
                                      rows="3"
                                      placeholder="Улица, дом, квартира, город, индекс"
                                      required></textarea>
                            <div class="error-message" id="addressError">
                                Пожалуйста, введите адрес
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="section-title">
                        <i>🔐</i> Учетные данные
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="username" class="required">Логин</label>
                            <input type="text"
                                   id="username"
                                   name="username"
                                   placeholder="ivanov_user"
                                   required
                                   autocomplete="username"
                                   minlength="3"
                                   maxlength="50">
                            <div class="error-message" id="usernameError">
                                Логин должен содержать от 3 до 50 символов
                            </div>
                            <div class="hint">Будет использоваться для входа в систему</div>
                        </div>

                        <div class="form-group">
                            <label for="password" class="required">Пароль</label>
                            <input type="password"
                                   id="password"
                                   name="password"
                                   placeholder="••••••••"
                                   required
                                   autocomplete="new-password"
                                   minlength="8">
                            <div class="error-message" id="passwordError">
                                Пароль должен содержать минимум 8 символов
                            </div>
                            <div class="password-strength">
                                <div class="strength-bar" id="passwordStrength"></div>
                            </div>
                            <div class="hint">Минимум 8 символов, включая буквы и цифры</div>
                        </div>

                        <div class="form-group">
                            <label for="confirmPassword" class="required">Подтверждение пароля</label>
                            <input type="password"
                                   id="confirmPassword"
                                   name="confirmPassword"
                                   placeholder="••••••••"
                                   required
                                   autocomplete="new-password">
                            <div class="error-message" id="confirmPasswordError">
                                Пароли не совпадают
                            </div>
                        </div>
                    </div>
                </div>

                <div class="terms-container">
                    <div class="section-title">
                        <i>📄</i> Соглашения
                    </div>

                    <div class="terms-text">
                        <p><strong>Пользовательское соглашение</strong></p>
                        <p>Регистрируясь в системе, вы соглашаетесь с условиями:</p>
                        <ul>
                            <li>Ваши персональные данные (телефон и email) будут зашифрованы для защиты</li>
                            <li>Вы получите роль "Клиент" с ограниченными правами доступа</li>
                            <li>Будет создана учетная запись в системе управления складом</li>
                            <li>Вы сможете просматривать только свои заказы и данные</li>
                            <li>Администратор системы имеет право на обработку ваших данных</li>
                        </ul>
                        <p>В соответствии с таблицей <code>Клиент</code> будут сохранены:</p>
                        <ul>
                            <li>ФИО и дата рождения</li>
                            <li>Зашифрованные телефон и email</li>
                            <li>Страна и адрес</li>
                        </ul>
                        <p>В таблице <code>login</code> будет создана запись с вашим логином и хешированным паролем.</p>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                        <label for="agreeTerms">
                            Я прочитал и согласен с условиями пользовательского соглашения
                        </label>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="agreePrivacy" name="agreePrivacy" required>
                        <label for="agreePrivacy">
                            Я согласен на обработку персональных данных в соответствии с политикой конфиденциальности
                        </label>
                    </div>
                </div>

                <div class="form-actions" id="formActions">
                    <button type="submit" class="btn btn-primary">
                        Зарегистрироваться
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="resetForm()">
                        Очистить форму
                    </button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Регистрация клиента...</p>
                    <p class="hint">Создание записи в таблице Клиент и генерация login...</p>
                </div>

                <div class="success-message" id="successMessage">
                    <div class="success-icon">✓</div>
                    <h3>Регистрация успешно завершена!</h3>
                    <p>Клиент зарегистрирован в системе</p>
                    <div class="terms-container" style="margin: 20px 0; text-align: left;">
                        <p><strong>Созданы записи:</strong></p>
                        <ul>
                            <li>В таблице <strong>Клиент</strong> с ID: <span id="clientId">-</span></li>
                            <li>В таблице <strong>login</strong> с логином: <span id="loginUsername">-</span></li>
                            <li>Данные телефона и email зашифрованы</li>
                            <li>Пароль хеширован с солью</li>
                            <li>Назначена роль "Клиент"</li>
                        </ul>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="goToLogin()">
                        Перейти к входу
                    </button>
                </div>
            </form>

            <div class="login-link">
                Уже есть аккаунт? <a href="login.html">Войдите в систему</a>
            </div>
        </div>
    </div>

    <script src="../Scripts/regClientPage.js"></script>
</body>
</html>